prebuilt: true
dictname: CompPatterns-1
initlist:
    PKIWeb:
        name: PKIWeb
        cptype: PKIWeb
        useyaml: true
        params:
            certs: |
                patternname: PKIWeb
                label: certs
                response:
                    - inedge:
                        srclabel: pkiCache
                        msgtype: response
                      outedge:
                        msgtype: response
                        dstlabel: pkiCache
                      period: 0
                      choice: response
            pkiCache: |
                patternname: PKIWeb
                label: pkiCache
                state:
                    threshold: "100"
                    visits: "0"
                actions:
                    - prompt:
                        srclabel: web-pkiServer
                        msgtype: request
                      action:
                        select: filter
                        costtype: filter
                      limit: 0
                      choice: ""
                    - prompt:
                        srclabel: certs
                        msgtype: response
                      action:
                        select: passThru
                        costtype: passThru
                      limit: 0
                      choice: ""
                response:
                    - inedge:
                        srclabel: web-pkiServer
                        msgtype: request
                      outedge:
                        msgtype: response
                        dstlabel: web-pkiServer
                      period: 0
                      choice: response
                    - inedge:
                        srclabel: web-pkiServer
                        msgtype: request
                      outedge:
                        msgtype: request
                        dstlabel: certs
                      period: 0
                      choice: request
            web-pkiClient: |
                patternname: PKIWeb
                label: web-pkiClient
                response:
                    - inedge:
                        srclabel: web-pkiClient
                        msgtype: initiate
                      outedge:
                        msgtype: request
                        dstlabel: web-pkiServer
                      period: 1.5
                      choice: request
                    - inedge:
                        srclabel: web-pkiServer
                        msgtype: response
                      outedge:
                        msgtype: ""
                        dstlabel: ""
                      period: 0
                      choice: ""
            web-pkiServer: |
                patternname: PKIWeb
                label: web-pkiServer
                state:
                    threshold: "1000"
                    visits: "0"
                actions:
                    - prompt:
                        srclabel: web-pkiClient
                        msgtype: request
                      action:
                        select: filter
                        costtype: filter
                      limit: 0
                      choice: ""
                    - prompt:
                        srclabel: pkiCache
                        msgtype: response
                      action:
                        select: passThru
                        costtype: passThru
                      limit: 0
                      choice: ""
                response:
                    - inedge:
                        srclabel: web-pkiClient
                        msgtype: request
                      outedge:
                        msgtype: response
                        dstlabel: web-pkiClient
                      period: 0
                      choice: response
                    - inedge:
                        srclabel: web-pkiClient
                        msgtype: request
                      outedge:
                        msgtype: request
                        dstlabel: pkiCache
                      period: 0
                      choice: request
        exectype:
            certs: static
            pkiCache: stateful
            web-pkiClient: static
            web-pkiServer: stateful
        msgs:
            - msgtype: initiate
              pcktlen: 100
              msglen: 1500
            - msgtype: request
              pcktlen: 250
              msglen: 1500
            - msgtype: response
              pcktlen: 1500
              msglen: 1500
    RSAChain:
        name: RSAChain
        cptype: RSAChain
        useyaml: true
        params:
            decrypt: |
                patternname: RSAChain
                label: decrypt
                response:
                    - inedge:
                        srclabel: encrypt
                        msgtype: encrypted
                      outedge:
                        msgtype: decrypted
                        dstlabel: sink
                      period: 0
                      choice: decrypted
            encrypt: |
                patternname: RSAChain
                label: encrypt
                response:
                    - inedge:
                        srclabel: src
                        msgtype: data
                      outedge:
                        msgtype: encrypted
                        dstlabel: decrypt
                      period: 0
                      choice: encrypted
            sink: |
                patternname: RSAChain
                label: sink
                response:
                    - inedge:
                        srclabel: decrypt
                        msgtype: decrypted
                      outedge:
                        msgtype: ""
                        dstlabel: ""
                      period: 0
                      choice: ""
            src: |
                patternname: RSAChain
                label: src
                response:
                    - inedge:
                        srclabel: src
                        msgtype: initiate
                      outedge:
                        msgtype: data
                        dstlabel: encrypt
                      period: 1
                      choice: data
        exectype:
            decrypt: static
            encrypt: static
            sink: static
            src: static
        msgs:
            - msgtype: initiate
              pcktlen: 50
              msglen: 1500
            - msgtype: data
              pcktlen: 1000
              msglen: 1500
            - msgtype: encrypted
              pcktlen: 500
              msglen: 1500
            - msgtype: decrypted
              pcktlen: 500
              msglen: 1500
    SimpleWeb:
        name: SimpleWeb
        cptype: SimpleWeb
        useyaml: true
        params:
            webClient: |
                patternname: SimpleWeb
                label: webClient
                response:
                    - inedge:
                        srclabel: webClient
                        msgtype: initiate
                      outedge:
                        msgtype: request
                        dstlabel: webServer
                      period: 3.333
                      choice: request
                    - inedge:
                        srclabel: webServer
                        msgtype: response
                      outedge:
                        msgtype: ""
                        dstlabel: ""
                      period: 0
                      choice: ""
            webServer: |
                patternname: SimpleWeb
                label: webServer
                response:
                    - inedge:
                        srclabel: webClient
                        msgtype: request
                      outedge:
                        msgtype: response
                        dstlabel: webClient
                      period: 0
                      choice: response
        exectype:
            webClient: static
            webServer: static
        msgs:
            - msgtype: initiate
              pcktlen: 100
              msglen: 1500
            - msgtype: request
              pcktlen: 250
              msglen: 1500
            - msgtype: response
              pcktlen: 1500
              msglen: 1500
    StatefulTest:
        name: StatefulTest
        cptype: StatefulTest
        useyaml: true
        params:
            branch: |
                patternname: StatefulTest
                label: branch
                state:
                    test: "true"
                actions:
                    - prompt:
                        srclabel: src
                        msgtype: marked
                      action:
                        select: testFlag
                        costtype: testFlag
                      limit: 0
                      choice: ""
                response:
                    - inedge:
                        srclabel: src
                        msgtype: marked
                      outedge:
                        msgtype: result
                        dstlabel: consumer1
                      period: 0
                      choice: result
                    - inedge:
                        srclabel: src
                        msgtype: marked
                      outedge:
                        msgtype: result
                        dstlabel: consumer2
                      period: 0
                      choice: result
            consumer1: |
                patternname: StatefulTest
                label: consumer1
                response:
                    - inedge:
                        srclabel: branch
                        msgtype: result
                      outedge:
                        msgtype: ""
                        dstlabel: ""
                      period: 0
                      choice: ""
            consumer2: |
                patternname: StatefulTest
                label: consumer2
                response:
                    - inedge:
                        srclabel: branch
                        msgtype: result
                      outedge:
                        msgtype: ""
                        dstlabel: ""
                      period: 0
                      choice: ""
            src: |
                patternname: StatefulTest
                label: src
                state:
                    failperiod: "1000"
                actions:
                    - prompt:
                        srclabel: src
                        msgtype: initiate
                      action:
                        select: mark
                        costtype: mark
                      limit: 0
                      choice: ""
                response:
                    - inedge:
                        srclabel: src
                        msgtype: initiate
                      outedge:
                        msgtype: marked
                        dstlabel: branch
                      period: 2
                      choice: marked
        exectype:
            branch: stateful
            consumer1: static
            consumer2: static
            src: stateful
        msgs:
            - msgtype: initiate
              pcktlen: 250
              msglen: 1500
            - msgtype: marked
              pcktlen: 250
              msglen: 1500
            - msgtype: result
              pcktlen: 250
              msglen: 1500
